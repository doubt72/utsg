# frozen_string_literal: true

module Scenarios
  class Scenario502 < Base
    ID = "502"
    NAME = "Armored Connage"
    ALLIES = ["fra"].freeze
    AXIS = ["ger"].freeze
    STATUS = "a"

    class << self
      def generate
        {
          turns: 7,
          first_setup: 1,
          first_move: 2,
          date: [1940, 5, 14],
          location: "Connage, France",
          author: "The Establishment",
          description:,
          map_data:,
          allied_units:,
          axis_units:,
        }
      end

      def description
        [
          "The day after Sedan fell, the first Panzer division raced south
          towards Connage and Bulson.  The French 55th and 71st infantry
          divisions had been routed and were in full retreat.  In the
          confusion the French response was delayed, until finally French
          finally committed their armor to try and fill the gap. The French
          armor was very slow, though and took a long time until it finally
          arrived, allowing the Germans to advance some ways; once they did
          arrive, however, the Germans had quite a bit of difficulty dealing
          with the tougher French tanks.",
          "Eventually, though, the better coordination of the faster German
          tanks formations told, and the Germans also brough up more powerful
          dual-purpose 8.8cm FlaK guns to help support the attack.  A bigger
          problem, however, was the French artillery; the German artillery had
          been left behind due to speed of the German advance and was unable
          to answer it.",
        ]
      end

      def map_data
        {
          start_weather: 0,
          base_weather: 0,
          precip: [0, 2],
          wind: [1, 5, true],
          hexes:,
          layout: [15, 23, "x"],
          allied_edge: "b",
          axis_edge: "t",
          victory_hexes: [
            [2, 2, 2], [8, 2, 2], [6, 10, 1], [5, 13, 1], [7, 13, 1], [4, 20, 1], [9, 21, 1],
          ],
          allied_setup: {
            "0" => [["*", "9-22"]],
            "3" => [["*", 22]],
          },
          axis_setup: {
            "0" => [["*", "0-5"]],
            "2" => [["*", 0]],
            "4" => [["*", 0]],
          },
          base_terrain: "g",
        }
      end

      def hexes
        [
          [
            { t: "f" },
            { t: "f" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o", s: { d: [4, 6] } },
            { t: "o", s: { d: [1, 4] } },
            { t: "o", s: { d: [1, 5] } },
            { t: "o" },
            { t: "o" },
            { t: "o", s: { d: [3, 6] } },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "f" },
            { t: "f" },
            { t: "f", r: { d: [3, 6], t: "t" } },
          ], [
            { t: "f" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o", s: { d: [3, 6] } },
            { t: "o" },
            { t: "o" },
            { t: "o", s: { d: [2, 4] } },
            { t: "o", s: { d: [1, 4] } },
            { t: "o", s: { d: [1, 3] } },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "f" },
            { t: "f" },
            { t: "f", r: { d: [3, 6], t: "t" } },
            { t: "f" },
          ], [
            { t: "o" },
            { t: "o", r: { d: [3, 5], t: "t" } },
            { t: "o", s: { d: [3, 5] }, r: { d: [4, 6], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 4, 6], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 3], t: "t" } },
            { t: "f" },
            { t: "f" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
          ], [
            { t: "f" },
            { t: "o", r: { d: [2, 3, 5], t: "t" } },
            { t: "o", s: { d: [2, 5] } },
            { t: "o" },
            { t: "d", d: 1 },
            { t: "d", d: 1 },
            { t: "d", d: 1 },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "f" },
            { t: "f" },
            { t: "f" },
            { t: "f" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "f" },
            { t: "f" },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o", s: { d: [2, 5] } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "f" },
            { t: "f" },
            { t: "f" },
            { t: "f" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "f" },
            { t: "o" },
            { t: "o", r: { d: [2, 6], t: "t" } },
            { t: "o", s: { d: [2, 6] } },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "f" },
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o", s: { d: [3, 5] } },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [3, 5], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o", s: { d: [2, 5] } },
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [2, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "o" },
            { t: "o", r: { d: [3, 5], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o", s: { d: [2, 6] } },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [3, 5], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "g" },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o" },
            { t: "o", s: { d: [3, 5] } },
            { t: "o", r: { d: [3, 5], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [2, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "f" },
          ], [
            { t: "g" },
            { t: "g" },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o" },
            { t: "o", s: { d: [2, 5] } },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o", d: 2, st: { sh: "s" } },
            { t: "o" },
            { t: "o" },
            { t: "f" },
            { t: "f" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "f" },
          ], [
            { t: "g" },
            { t: "g" },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o" },
            { t: "o", s: { d: [2, 6] } },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o", d: 5, st: { sh: "s" } },
            { t: "o" },
            { t: "o" },
            { t: "f" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "f" },
            { t: "f" },
            { t: "f" },
          ], [
            { t: "g" },
            { t: "g" },
            { t: "g" },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o", s: { d: [3, 5] } },
            { t: "o", d: 2, st: { sh: "s" } },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "f" },
            { t: "f" },
            { t: "f" },
          ], [
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o", s: { d: [2, 5] } },
            { t: "o", d: 5, st: { sh: "s" } },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o", d: 2, st: { sh: "l" } },
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "f" },
            { t: "f" },
            { t: "f" },
          ], [
            { t: "g" },
            { t: "g" },
            { t: "g" },
            { t: "o" },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o", s: { d: [2, 5] } },
            { t: "o" },
            { t: "o", r: { d: [2, 4, 5], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 3], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "f" },
          ], [
            { t: "g" },
            { t: "g" },
            { t: "g" },
            { t: "o" },
            { t: "o", r: { d: [2, 6], t: "t" } },
            { t: "o", s: { d: [2, 5] } },
            { t: "d", d: 2 },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o", s: { d: [2, 6] } },
            { t: "d", d: 2 },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "f" },
          ], [
            { t: "g" },
            { t: "g" },
            { t: "g" },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o", s: { d: [4, 6] } },
            { t: "o", s: { d: [1, 3] } },
            { t: "o" },
            { t: "d", d: 2 },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "f" },
            { t: "f" },
          ], [
            { t: "g" },
            { t: "g" },
            { t: "g" },
            { t: "o", r: { d: [3, 5], t: "t" } },
            { t: "o", s: { d: [3, 5] } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "f" },
            { t: "f" },
          ], [
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 2, 5], t: "t" } },
            { t: "o", s: { d: [2, 6] } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [2, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "f" },
            { t: "f" },
            { t: "f" },
          ], [
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", s: { d: [3, 6] }, r: { d: [2, 5], t: "t" } },
            { t: "d", d: 1 },
            { t: "d", d: 1 },
            { t: "d", d: 1 },
            { t: "o", d: 3, st: { sh: "l" } },
            { t: "o", r: { d: [3, 6], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "f" },
            { t: "f" },
            { t: "o" },
          ], [
            { t: "g" },
            { t: "g" },
            { t: "g" },
            { t: "o", s: { d: [3, 6] } },
            { t: "o", r: { d: [2, 4, 5], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 4], t: "t" } },
            { t: "o", r: { d: [1, 3, 5], t: "t" } },
            { t: "o", d: 3, st: { sh: "l" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "g" },
            { t: "g" },
            { t: "g" },
            { t: "o", s: { d: [3, 6] } },
            { t: "o" },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o", r: { d: [2, 5], t: "t" } },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
          ],
        ]
      end

      def allied_units
        {
          "0": { list: [
            :fra_leader_5_2,
            [2, :fra_leader_5_1],
            [2, :fra_bar_s],
            [4, :fra_reservist_s],
            :fra_crew_t,
            [2, :fra_fm_24_29],
            :fra_25mm_hotchkiss,
            :fra_radio_155mm,
            [6, :fra_fcm_36],
          ].map { |u| Utility::Scenarios::Units.unit_definition(u) } },
          "3": { list: [
            [3, :fra_fcm_36],
          ].map { |u| Utility::Scenarios::Units.unit_definition(u) } },
        }
      end

      def axis_units
        {
          "0": { list: [
            :ger_leader_6_2,
            :ger_leader_5_1,
            [4, :ger_rifle_s],
            [2, :ger_elite_crew_t],
            [2, :ger_mg_34],
            [2, :ger_3_7cm_pak_36],
            [4, :ger_pzkpfw_ii_a_e],
            [2, :ger_pzkpfw_iii__39],
          ].map { |u| Utility::Scenarios::Units.unit_definition(u) } },
          "2": { list: [
            :ger_leader_5_1,
            [2, :ger_rifle_s],
            :ger_mg_34,
          ].map { |u| Utility::Scenarios::Units.unit_definition(u) } },
          "4": { list: [
            [2, :ger_pzkpfw_iii__39],
            :ger_elite_crew_t,
            :ger_8_8cm_flak_36,
            :ger_le__gl__lkw,
          ].map { |u| Utility::Scenarios::Units.unit_definition(u) } },
        }
      end
    end
  end
end
