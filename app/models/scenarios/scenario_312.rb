# frozen_string_literal: true

module Scenarios
  class Scenario312 < Base
    ID = "312"
    NAME = "Purple Heart Lane"
    ALLIES = ["usa"].freeze
    AXIS = ["ger"].freeze
    STATUS = "p"

    DATE = [1944, 6, 10].freeze
    LAYOUT = [15, 23, "x"].freeze

    ALLIED_UNITS = {
      "0": {
        list: [
          :usa_leader_6_1,
          [2, :usa_leader_5_1],
          [10, :usa_paratroop_s],
          [3, :usa_m1918_bar],
          :usa_m2_mortar,
          :usa_radio_155mm,
        ],
      },
    }.freeze

    AXIS_UNITS = {
      "0": {
        list: [
          :ger_leader_5_1,
          :ger_leader_4_1,
          [6, :ger_fallschirmjager_s],
          :ger_crew_t,
          [2, :ger_mg_42],
          :ger_radio_10_5cm,
          :ger_8_8cm_flak_36,
          :pillbox,
          [2, :foxhole],
        ],
      },
    }.freeze

    class << self
      def generate
        {
          turns: 6,
          first_setup: 2,
          first_move: 1,
          date:,
          location: "Carentan, France",
          author: "The Establishment",
          description:,
          map_data:,
          allied_units:,
          axis_units:,
        }
      end

      def description
        [
          "The build-up to Purple Heart Lane, a deadly stretch of road leading
          into Carentan, occurred during the days following the D-Day landings
          on 6 June 1944. After securing Utah Beach, American forces,
          primarily elements of the 101st Airborne Division, were ordered to
          capture Carentan, a key crossroads town in Normandy. Taking Carentan
          was crucial because it would link the Utah and Omaha Beach sectors,
          creating a continuous front and allowing for more effective movement
          of troops and supplies inland.",

          "The terrain leading to Carentan posed a significant challenge. The
          101st had to advance through low-lying fields crisscrossed by
          hedgerows, flooded by the Germans to slow any assault. One of the
          only viable routes into the town was along the N13 causeway, a
          narrow elevated road flanked by open, marshy fields. The causeway
          was heavily defended by German Fallschirmjäger (paratroopers) from
          the 6th Parachute Regiment and artillery positions. The Americans
          had no choice but to attack directly up this road under withering
          fire.",

          "In the days leading up to the main assault, the 101st engaged in
          skirmishes and probing attacks, often under sniper fire and mortar
          bombardment. The fighting intensified on June 10 and 11, as U.S.
          troops attempted to push south and secure the causeway approaches.
          Casualties mounted quickly, especially among the 502nd and 506th
          Parachute Infantry Regiments, as they faced entrenched German
          positions and limited cover. The high number of wounded and killed
          gave the route its grim nickname: Purple Heart Lane — a reference to
          the American military decoration awarded to those wounded or killed
          in action. This brutal build-up set the stage for the fierce Battle
          of Carentan on June 12, where the Americans finally took the town
          after close-quarters urban fighting.",
        ]
      end

      def map_data
        {
          start_weather: 0,
          base_weather: 0,
          precip: [0, 2],
          wind: [0, 3, false],
          hexes:,
          layout:,
          allied_dir: 5.5,
          axis_dir: 2.5,
          victory_hexes: [
            [4, 5, 1], [7, 10, 2], [10, 16, 2], [11, 18, 2], [12, 20, 2],
          ],
          allied_setup: { "0" => [["*", "0-5"]] },
          axis_setup: { "0" => [["*", "8-22"]] },
          base_terrain: "g",
        }
      end

      def hexes
        [
          [
            { t: "m" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "m" },
            { t: "m" },
            { t: "f" },
            { t: "o", h: 1, r: { d: [3, 6] } },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "m" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "m" },
            { t: "f" },
            { t: "o", h: 1, r: { d: [3, 6] } },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "f" },
            { t: "o", h: 1, r: { d: [3, 6] } },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [3, 6] } },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "f" },
            { t: "f" },
            { t: "f" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "o", h: 1, r: { d: [3, 6] } },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "o", h: 1, r: { d: [1, 4] } },
            { t: "o", h: 1, r: { d: [1, 4] } },
            { t: "o", h: 1, r: { d: [1, 4] } },
            { t: "o", h: 1, r: { d: [1, 4] } },
            { t: "o", h: 1, r: { d: [1, 2, 3, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "f" },
            { t: "f" },
            { t: "f" },
            { t: "f" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "o", h: 1 },
            { t: "f" },
            { t: "f" },
            { t: "f" },
            { t: "f" },
            { t: "f" },
            { t: "f" },
            { t: "f" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "o", h: 1 },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "o", h: 1 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "f" },
            { t: "o", h: 1 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "f" },
            { t: "m" },
            { t: "o", h: 1 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "o", h: 1 },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "m" },
            { t: "m" },
            { t: "f" },
            { t: "f" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "f" },
            { t: "f" },
            { t: "o", r: { d: [4, 6] } },
            { t: "o", r: { d: [1, 4] } },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 4, 5] } },
            { t: "o", h: 1, r: { d: [1, 4] } },
            { t: "o", r: { d: [1, 4] } },
            { t: "o", r: { d: [1, 3] } },
            { t: "w" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "o" },
            { t: "o", h: 1 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "o", h: 1 },
            { t: "o" },
            { t: "w" },
            { t: "o" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "o" },
            { t: "w" },
            { t: "w" },
            { t: "w", r: { d: [2, 5] } },
            { t: "w" },
            { t: "w" },
            { t: "o" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "o" },
            { t: "w" },
            { t: "f" },
            { t: "o", h: 1 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "o", h: 1 },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "o" },
            { t: "w" },
            { t: "f" },
            { t: "o" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "o" },
          ], [
            { t: "m" },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "o" },
            { t: "w" },
            { t: "f" },
            { t: "o" },
            { t: "o" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
            { t: "o" },
          ], [
            { t: "m" },
            { t: "f" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "o" },
            { t: "w" },
            { t: "f" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "d", h: 1, d: 2 },
            { t: "o", h: 1, r: { d: [2, 5] } },
            { t: "d", h: 1, d: 2 },
          ],
        ]
      end
    end
  end
end
