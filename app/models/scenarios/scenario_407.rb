# frozen_string_literal: true

module Scenarios
  class Scenario407 < Base
    ID = "407"
    NAME = "Bloody Ridge"
    ALLIES = ["usa"].freeze
    AXIS = ["jap"].freeze
    STATUS = "p"

    DATE = [1942, 9, 13].freeze
    LAYOUT = [15, 23, "x"].freeze

    ALLIED_UNITS = {
      "0": {
        list: [
          :usa_leader_6_2,
          :usa_leader_5_1,
          :usa_leader_4_1,
          [12, :usa_marine_rifle_s],
          [3, :usa_m1917_browning],
          :usa_radio_105mm,
          [3, :foxhole],
        ],
      },
    }.freeze

    AXIS_UNITS = {
      "0": {
        list: [
          :jap_leader_5_1,
          [2, :jap_leader_4_1],
          [16, :jap_a_division_s],
          [4, :jap_type_99_lmg],
          [2, :jap_type_89_gren_l],
        ],
      },
    }.freeze

    class << self
      def generate
        {
          turns: 7,
          first_setup: 1,
          first_move: 2,
          date:,
          location: "Guadalcanal, Solomon Islands",
          author: "The Establishment",
          description:,
          map_data:,
          allied_units:,
          axis_units:,
        }
      end

      def description
        [
          "In September of 1942, American Marines raided Tasimboko on
          Guadalcanal and discovered a Japanese supply base. The Marines
          seized documents, equipment, and food supplies. The quantities of
          supplies and intelligence from the captured documents revealed that
          at least 3,000 Japanese troops were on the island and apparently
          planning an attack.",

          "Edson and Colonel Gerald Thomas, Vandegrift's operations officer,
          believed that the Japanese attack would come at the Lunga Ridge,
          parallel to the Lunga River just south of Henderson Field. The ridge
          offered a natural avenue of approach to the airfield, commanded the
          surrounding area and was almost undefended.  Edson and Thomas tried
          to persuade Vandegrift to move forces to defend the ridge, but
          Vandegrift refused, believing that the Japanese were more likely to
          attack along the coast.  Finally, Thomas convinced Vandegrift that
          the ridge was a good location for Edson's Raiders to \"rest\" from
          their actions of the preceding month. On 11 September, the 840 men
          of Edson's unit — including the 1st Raiders and the Paramarines —
          deployed onto and around the ridge and prepared to defend it.",

          "The Americans were right to be concerned, because a learned from a
          captured U.S. pilot that the ridge was the weakest part of the
          Marine defenses and during the day of 12 September, Kawaguchi's
          troops struggled through the jungle toward their assembly points for
          attacks there that night.",
        ]
      end

      def map_data
        {
          start_weather: 0,
          base_weather: 0,
          precip: [0, 2],
          wind: [0, 2, false],
          hexes:,
          layout:,
          allied_edge: "t",
          axis_edge: "b",
          victory_hexes: [
            [4, 2, 1], [6, 4, 1], [7, 8, 1], [9, 10, 1], [9, 14, 1],
          ],
          allied_setup: { "0" => [["*", "0-18"]] },
          axis_setup: { "0" => [["*", "20-22"]] },
          base_terrain: "g",
        }
      end

      def hexes
        [
          [
            { t: "j" },
            { t: "j" },
            { t: "b" },
            { t: "b", h: 1 },
            { t: "o", h: 1 },
            { t: "o", h: 1, r: { d: [3, 6], t: "p" } },
            { t: "b" },
            { t: "b" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
          ], [
            { t: "j" },
            { t: "j" },
            { t: "b" },
            { t: "b", h: 1 },
            { t: "o", h: 1, r: { d: [3, 6], t: "p" } },
            { t: "b" },
            { t: "b" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "o" },
            { t: "o" },
            { t: "j" },
            { t: "b" },
            { t: "o", h: 1, r: { d: [3, 5], t: "p" } },
            { t: "b" },
            { t: "b" },
            { t: "b" },
            { t: "o" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "o" },
          ], [
            { t: "o" },
            { t: "b" },
            { t: "b" },
            { t: "b", h: 1 },
            { t: "o", h: 1, r: { d: [2, 5], t: "p" } },
            { t: "b", h: 1 },
            { t: "b", h: 1 },
            { t: "b" },
            { t: "o" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "o" },
          ], [
            { t: "b" },
            { t: "b" },
            { t: "b" },
            { t: "b" },
            { t: "b" },
            { t: "o", h: 1, r: { d: [2, 4], t: "p" } },
            { t: "o", h: 1, r: { d: [1, 5], t: "p" } },
            { t: "b" },
            { t: "b" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
          ], [
            { t: "b" },
            { t: "o" },
            { t: "j" },
            { t: "b" },
            { t: "b", h: 1 },
            { t: "o", h: 1 },
            { t: "o", h: 1, r: { d: [2, 5], t: "p" } },
            { t: "b" },
            { t: "b" },
            { t: "b" },
            { t: "b" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
          ], [
            { t: "b" },
            { t: "b" },
            { t: "o" },
            { t: "j" },
            { t: "b" },
            { t: "b" },
            { t: "b", h: 1 },
            { t: "o", h: 1, r: { d: [2, 5], t: "p" } },
            { t: "b" },
            { t: "b", h: 1 },
            { t: "b" },
            { t: "b" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "b" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "b", h: 1 },
            { t: "o", h: 1, r: { d: [2, 4], t: "p" } },
            { t: "o", h: 1, r: { d: [1, 5], t: "p" } },
            { t: "b", h: 1 },
            { t: "b" },
            { t: "o" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
          ], [
            { t: "m" },
            { t: "b" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "b", h: 1 },
            { t: "o", h: 2 },
            { t: "o", h: 2 },
            { t: "o", h: 1, r: { d: [2, 5], t: "p" } },
            { t: "b", h: 1 },
            { t: "b" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
          ], [
            { t: "m" },
            { t: "b" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "b", h: 1 },
            { t: "o", h: 1 },
            { t: "o", h: 2 },
            { t: "o", h: 2 },
            { t: "o", h: 1, r: { d: [2, 5], t: "p" } },
            { t: "b", h: 1 },
            { t: "b", h: 1 },
            { t: "o" },
            { t: "j" },
            { t: "j" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "b" },
            { t: "o" },
            { t: "o" },
            { t: "b" },
            { t: "b", h: 1 },
            { t: "o", h: 1 },
            { t: "o", h: 1 },
            { t: "o", h: 2 },
            { t: "o", h: 1, r: { d: [2, 5], t: "p" } },
            { t: "b", h: 1 },
            { t: "b" },
            { t: "o" },
            { t: "j" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "b" },
            { t: "j" },
            { t: "j" },
            { t: "b" },
            { t: "b" },
            { t: "b", h: 1 },
            { t: "o", h: 1 },
            { t: "o", h: 1 },
            { t: "o", h: 1, r: { d: [2, 6], t: "p" } },
            { t: "b" },
            { t: "b" },
            { t: "o" },
            { t: "j" },
          ], [
            { t: "y" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "j" },
            { t: "j" },
            { t: "b" },
            { t: "b" },
            { t: "b", h: 1 },
            { t: "o", h: 1 },
            { t: "o", h: 1, r: { d: [3, 6], t: "p" } },
            { t: "b", h: 1 },
            { t: "b" },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "y" },
            { t: "y" },
            { t: "y" },
            { t: "m" },
            { t: "j" },
            { t: "b" },
            { t: "b" },
            { t: "b" },
            { t: "b", h: 1 },
            { t: "o", h: 2, r: { d: [3, 6], t: "p" } },
            { t: "b", h: 1 },
            { t: "b" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "y" },
            { t: "m" },
            { t: "j" },
            { t: "j" },
            { t: "b", h: 1 },
            { t: "b", h: 1 },
            { t: "o", h: 2 },
            { t: "b", h: 1 },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "j" },
          ], [
            { t: "o" },
            { t: "m" },
            { t: "m" },
            { t: "y" },
            { t: "m" },
            { t: "j" },
            { t: "j" },
            { t: "b", h: 1 },
            { t: "b", h: 1 },
            { t: "b", h: 1 },
            { t: "b" },
            { t: "b" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
          ], [
            { t: "o" },
            { t: "o" },
            { t: "m" },
            { t: "m" },
            { t: "y" },
            { t: "m" },
            { t: "j" },
            { t: "j" },
            { t: "b", h: 1 },
            { t: "b", h: 1 },
            { t: "b" },
            { t: "b" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
          ], [
            { t: "o" },
            { t: "m" },
            { t: "m" },
            { t: "y" },
            { t: "m" },
            { t: "m" },
            { t: "j" },
            { t: "j" },
            { t: "b", h: 1 },
            { t: "b", h: 1 },
            { t: "b" },
            { t: "o" },
            { t: "o" },
            { t: "b" },
            { t: "b" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "y" },
            { t: "m" },
            { t: "m" },
            { t: "o" },
            { t: "o" },
            { t: "b" },
            { t: "b", h: 1 },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "y" },
            { t: "y" },
            { t: "y" },
            { t: "m" },
            { t: "m" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "b" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "o" },
            { t: "o" },
            { t: "j" },
          ], [
            { t: "y" },
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "j" },
            { t: "j" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "o" },
            { t: "o" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "j" },
            { t: "j" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
          ], [
            { t: "m" },
            { t: "m" },
            { t: "m" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "o" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
            { t: "j" },
          ],
        ]
      end
    end
  end
end
